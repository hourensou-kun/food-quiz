<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>ãŸã¹ã‚‚ã®ã‚¯ã‚¤ã‚º ğŸ</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="game-container">
    <!-- ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ -->
    <div id="title-screen" class="screen active">
      <h1>ğŸ ãŸã¹ã‚‚ã®ã‚¯ã‚¤ã‚º ğŸŒ</h1>
      <button id="start-btn">â–¶ ã¯ã˜ã‚ã‚‹</button>
    </div>

    <!-- ã‚¯ã‚¤ã‚ºç”»é¢ -->
    <div id="quiz-screen" class="screen">
      <h2 id="question-text"></h2>
      <div id="choices-container"></div>
    </div>

    <!-- çµæœç”»é¢ -->
    <div id="result-screen" class="screen">
      <h2 id="result-message"></h2>
      <p id="user-choice-text"></p>

      <div id="result-images">
        <div id="user-image-container" class="image-box"></div>
        <div id="answer-image-container" class="image-box"></div>
      </div>

      <div id="video-container">
        <video id="result-video" playsinline></video>
      </div>

      <p id="answer-text"></p>
      <button id="next-btn">â–¶ ã¤ãã®ã‚‚ã‚“ã ã„</button>
    </div>

    <!-- çµ‚äº†ç”»é¢ -->
    <div id="end-screen" class="screen">
      <h2>ğŸ‰ ãŠã¤ã‹ã‚Œã•ã¾ï¼</h2>
      <button id="restart-btn">ã‚‚ã†ã„ã¡ã©ã‚ãã¶</button>
    </div>
  </div>

  <script>
    const questions = [
      {
        question: "ã“ã‚Œã¯ãªã«ï¼Ÿ",
        answer: "ã‚Šã‚“ã”",
        image: "image/apple.png",
        video: "image/apple.mp4",
        choices: [
          { text: "ã‚Šã‚“ã”", image: "image/apple.png" },
          { text: "ãƒãƒŠãƒŠ", image: "image/banana.png" },
          { text: "ã¿ã‹ã‚“", image: "image/orange.png" }
        ]
      },
      {
        question: "ã“ã‚Œã¯ãªã«ï¼Ÿ",
        answer: "ãƒãƒŠãƒŠ",
        image: "image/banana.png",
        video: "image/banana.mp4",
        choices: [
          { text: "ã¶ã©ã†", image: "image/grape.png" },
          { text: "ãƒãƒŠãƒŠ", image: "image/banana.png" },
          { text: "ã‚¹ã‚¤ã‚«", image: "image/watermelon.png" }
        ]
      },
      {
        question: "ã“ã‚Œã¯ãªã«ï¼Ÿ",
        answer: "ã¿ã‹ã‚“",
        image: "image/orange.png",
        video: "image/orange.mp4",
        choices: [
          { text: "ãƒ¡ãƒ­ãƒ³", image: "image/melon.png" },
          { text: "ã„ã¡ã”", image: "image/strawberry.png" },
          { text: "ã¿ã‹ã‚“", image: "image/orange.png" }
        ]
      }
    ];

    let currentQuestion = 0;

    const titleScreen = document.getElementById("title-screen");
    const quizScreen = document.getElementById("quiz-screen");
    const resultScreen = document.getElementById("result-screen");
    const endScreen = document.getElementById("end-screen");
    const questionText = document.getElementById("question-text");
    const choicesContainer = document.getElementById("choices-container");
    const resultMessage = document.getElementById("result-message");
    const userChoiceText = document.getElementById("user-choice-text");
    const userImageContainer = document.getElementById("user-image-container");
    const answerImageContainer = document.getElementById("answer-image-container");
    const resultVideo = document.getElementById("result-video");
    const answerText = document.getElementById("answer-text");
    const nextBtn = document.getElementById("next-btn");

    document.getElementById("start-btn").addEventListener("click", startQuiz);
    document.getElementById("restart-btn").addEventListener("click", restartQuiz);
    nextBtn.addEventListener("click", nextQuestion);

    function startQuiz() {
      titleScreen.classList.remove("active");
      quizScreen.classList.add("active");
      showQuestion();
    }

    function showQuestion() {
      const q = questions[currentQuestion];
      questionText.textContent = q.question;
      choicesContainer.innerHTML = "";

      const shuffledChoices = [...q.choices].sort(() => Math.random() - 0.5);
      shuffledChoices.forEach(choice => {
        const btn = document.createElement("button");
        btn.classList.add("choice-btn");

        const img = document.createElement("img");
        img.src = choice.image;
        img.alt = choice.text;

        const label = document.createElement("p");
        label.textContent = choice.text;

        btn.appendChild(img);
        btn.appendChild(label);
        btn.addEventListener("click", () => selectAnswer(choice.text, choice.image));
        choicesContainer.appendChild(btn);
      });
    }

    function selectAnswer(choice, choiceImage) {
      const q = questions[currentQuestion];
      quizScreen.classList.remove("active");
      resultScreen.classList.add("active");

      resultVideo.pause();
      resultVideo.currentTime = 0;
      userImageContainer.innerHTML = "";
      answerImageContainer.innerHTML = "";

      const userImg = document.createElement("img");
      const answerImg = document.createElement("img");

      if (choice === q.answer) {
        resultMessage.textContent = "â­• ã›ã„ã‹ã„ï¼";
        userChoiceText.textContent = "";
        answerImg.src = q.image;
        userImageContainer.style.display = "none";
      } else {
        resultMessage.textContent = "âŒ ã–ã‚“ã­ã‚“ï¼";
        userChoiceText.textContent = `ã‚ãªãŸãŒé¸ã‚“ã ã®ã¯ã€Œ${choice}ã€ã§ã™`;
        userImg.src = choiceImage;
        answerImg.src = q.image;
        userImageContainer.style.display = "flex";
        userImageContainer.appendChild(userImg);
      }

      answerImageContainer.appendChild(answerImg);
      resultVideo.src = q.video;
      resultVideo.play();
      answerText.textContent = `ã“ãŸãˆï¼š${q.answer}`;
    }

    function nextQuestion() {
      resultVideo.pause();
      resultVideo.currentTime = 0;
      currentQuestion++;
      if (currentQuestion < questions.length) {
        resultScreen.classList.remove("active");
        quizScreen.classList.add("active");
        showQuestion();
      } else {
        resultScreen.classList.remove("active");
        endScreen.classList.add("active");
      }
    }

    function restartQuiz() {
      endScreen.classList.remove("active");
      titleScreen.classList.add("active");
      currentQuestion = 0;
    }
  </script>
</body>
</html>
