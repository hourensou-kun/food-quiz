<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>クイズアプリ 横向き固定</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    background: #f0f0f0;
    font-family: "Hiragino Kaku Gothic ProN", "メイリオ", sans-serif;
  }

  /* スマホ縦でも常に横表示 */
  body {
    transform: rotate(90deg);
    transform-origin: right top;
    width: 100vh;
    height: 100vw;
    overflow: hidden;
    position: absolute;
    top: 0;
    right: 0;
  }

  .screen {
    display: none;
    width: 100%;
    height: 100%;
    padding: 20px;
    box-sizing: border-box;
    text-align: center;
  }

  .active {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  h1, h2 {
    margin: 10px 0;
  }

  .btn {
    background: #ff6b6b;
    border: none;
    color: white;
    font-size: 1.2em;
    padding: 10px 25px;
    margin: 10px;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.2s;
  }

  .btn:hover {
    background: #ff5252;
  }

  .choice-img {
    width: 200px;
    height: 200px;
    object-fit: contain;
    margin: 10px;
    border-radius: 10px;
    border: 3px solid transparent;
    transition: 0.3s;
  }

  .choice-img:hover {
    border-color: #ff6b6b;
  }

  #result-screen {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  #result-video {
    width: 320px;
    height: 180px;
    margin-top: 10px;
    border-radius: 10px;
  }

  #correct-image {
    width: 200px;
    height: 200px;
    object-fit: contain;
    border-radius: 12px;
  }

  #next-btn {
    margin-top: 20px;
  }
</style>
</head>
<body>

  <!-- 最初の画面 -->
  <div id="start-screen" class="screen active">
    <h1>クイズスタート！</h1>
    <button class="btn" onclick="startQuiz()">▶ はじめる</button>
  </div>

  <!-- クイズ画面 -->
  <div id="quiz-screen" class="screen">
    <h2 id="question-text"></h2>
    <div id="choices"></div>
  </div>

  <!-- 結果画面 -->
  <div id="result-screen" class="screen">
    <h2 id="result-text"></h2>
    <img id="correct-image" src="" alt="correct image" style="display:none;">
    <video id="result-video" controls style="display:none;"></video>
    <button id="next-btn" class="btn" onclick="nextQuestion()">▶ つぎのもんだい</button>
  </div>

<script>
  const quizData = [
    {
      question: "これはなに？",
      choice1: "りんご",
      choice2: "バナナ",
      choice3: "ぶどう",
      choice1_img: "https://upload.wikimedia.org/wikipedia/commons/1/15/Red_Apple.jpg",
      choice2_img: "https://upload.wikimedia.org/wikipedia/commons/8/8a/Banana-Single.jpg",
      choice3_img: "https://upload.wikimedia.org/wikipedia/commons/0/09/Grapes_on_vine.jpg",
      answer: 1,
      answer_video: "https://www.w3schools.com/html/mov_bbb.mp4"
    },
    {
      question: "これはどれ？",
      choice1: "ネコ",
      choice2: "イヌ",
      choice3: "ウサギ",
      choice1_img: "https://upload.wikimedia.org/wikipedia/commons/3/3a/Cat03.jpg",
      choice2_img: "https://upload.wikimedia.org/wikipedia/commons/6/6e/Golde33443.jpg",
      choice3_img: "https://upload.wikimedia.org/wikipedia/commons/8/88/Rabbit_in_montana.jpg",
      answer: 2,
      answer_video: "https://www.w3schools.com/html/movie.mp4"
    }
  ];

  let current = 0;

  function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function startQuiz() {
    current = 0;
    showQuestion();
  }

  function showQuestion() {
    const q = quizData[current];
    showScreen('quiz-screen');

    document.getElementById('question-text').textContent = q.question;

    const choicesDiv = document.getElementById('choices');
    choicesDiv.innerHTML = '';

    [q.choice1, q.choice2, q.choice3].forEach((choice, i) => {
      const img = document.createElement('img');
      img.src = q[`choice${i + 1}_img`];
      img.className = 'choice-img';
      img.onclick = () => checkAnswer(i + 1);
      choicesDiv.appendChild(img);
    });
  }

  function checkAnswer(choice) {
    stopVideo();
    const q = quizData[current];
    showScreen("result-screen");

    const resultText = document.getElementById("result-text");
    const correctImg = document.getElementById("correct-image");
    const nextBtn = document.getElementById("next-btn");
    const video = document.getElementById("result-video");

    // 一旦リセット
    correctImg.style.display = "none";
    video.style.display = "none";

    if (choice === q.answer) {
      resultText.textContent = "⭕ せいかい！";
      resultText.style.color = "#ff6b6b";

      const correctSrc = [q.choice1_img, q.choice2_img, q.choice3_img][q.answer - 1];
      const correctName = [q.choice1, q.choice2, q.choice3][q.answer - 1];

      // 答えの文字
      const answerText = document.createElement("p");
      answerText.textContent = correctName;
      answerText.style.fontSize = "1.5em";
      answerText.style.margin = "10px 0";
      answerText.style.color = "#444";

      // 答え画像
      correctImg.src = correctSrc;
      correctImg.style.display = "block";

      const resultScreen = document.getElementById("result-screen");
      resultScreen.insertBefore(answerText, nextBtn);

      if (q.answer_video) {
        video.src = q.answer_video;
        video.style.display = "block";
        video.play();
        video.onended = () => stopVideo();
      }
    } else {
      resultText.textContent = "❌ ざんねん！";
      resultText.style.color = "#555";
    }

    // ボタンを常に表示
    nextBtn.style.display = "inline-block";
  }

  function nextQuestion() {
    stopVideo();
    current++;
    if (current < quizData.length) {
      showQuestion();
    } else {
      alert("おしまい！おつかれさまでした🎉");
      showScreen("start-screen");
    }
  }

  function stopVideo() {
    const video = document.getElementById("result-video");
    video.pause();
    video.currentTime = 0;
  }
</script>

</body>
</html>
